(()=>{var e={669:(e,t,r)=>{e.exports=r(609)},448:(e,t,r)=>{"use strict";var n=r(867),o=r(26),i=r(372),s=r(327),a=r(97),c=r(109),u=r(985),h=r(874),l=r(648),f=r(644),p=r(205);e.exports=function(e){return new Promise((function(t,r){var d,m=e.data,_=e.headers,g=e.responseType;function v(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}n.isFormData(m)&&n.isStandardBrowserEnv()&&delete _["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var E=e.auth.username||"",y=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";_.Authorization="Basic "+btoa(E+":"+y)}var S=a(e.baseURL,e.url);function A(){if(b){var n="getAllResponseHeaders"in b?c(b.getAllResponseHeaders()):null,i={data:g&&"text"!==g&&"json"!==g?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:n,config:e,request:b};o((function(e){t(e),v()}),(function(e){r(e),v()}),i),b=null}}if(b.open(e.method.toUpperCase(),s(S,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=A:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(A)},b.onabort=function(){b&&(r(new l("Request aborted",l.ECONNABORTED,e,b)),b=null)},b.onerror=function(){r(new l("Network Error",l.ERR_NETWORK,e,b,b)),b=null},b.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",n=e.transitional||h;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(new l(t,n.clarifyTimeoutError?l.ETIMEDOUT:l.ECONNABORTED,e,b)),b=null},n.isStandardBrowserEnv()){var C=(e.withCredentials||u(S))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;C&&(_[e.xsrfHeaderName]=C)}"setRequestHeader"in b&&n.forEach(_,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete _[t]:b.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),g&&"json"!==g&&(b.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){b&&(r(!e||e&&e.type?new f:e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),m||(m=null);var w=p(S);w&&-1===["http","https","file"].indexOf(w)?r(new l("Unsupported protocol "+w+":",l.ERR_BAD_REQUEST,e)):b.send(m)}))}},609:(e,t,r)=>{"use strict";var n=r(867),o=r(849),i=r(321),s=r(185),a=function e(t){var r=new i(t),a=o(i.prototype.request,r);return n.extend(a,i.prototype,r),n.extend(a,r),a.create=function(r){return e(s(t,r))},a}(r(546));a.Axios=i,a.CanceledError=r(644),a.CancelToken=r(972),a.isCancel=r(502),a.VERSION=r(288).version,a.toFormData=r(675),a.AxiosError=r(648),a.Cancel=a.CanceledError,a.all=function(e){return Promise.all(e)},a.spread=r(713),a.isAxiosError=r(268),e.exports=a,e.exports.default=a},972:(e,t,r)=>{"use strict";var n=r(644);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;this.promise.then((function(e){if(r._listeners){var t,n=r._listeners.length;for(t=0;t<n;t++)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},644:(e,t,r)=>{"use strict";var n=r(648);function o(e){n.call(this,null==e?"canceled":e,n.ERR_CANCELED),this.name="CanceledError"}r(867).inherits(o,n,{__CANCEL__:!0}),e.exports=o},502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,r)=>{"use strict";var n=r(867),o=r(327),i=r(782),s=r(572),a=r(185),c=r(97),u=r(875),h=u.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;void 0!==r&&u.assertOptions(r,{silentJSONParsing:h.transitional(h.boolean),forcedJSONParsing:h.transitional(h.boolean),clarifyTimeoutError:h.transitional(h.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var l=[s,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(c),i=Promise.resolve(t);l.length;)i=i.then(l.shift(),l.shift());return i}for(var f=t;n.length;){var p=n.shift(),d=n.shift();try{f=p(f)}catch(e){d(e);break}}try{i=s(f)}catch(e){return Promise.reject(e)}for(;c.length;)i=i.then(c.shift(),c.shift());return i},l.prototype.getUri=function(e){e=a(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,r){return this.request(a(r||{},{method:e,url:t,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(a(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}l.prototype[e]=t(),l.prototype[e+"Form"]=t(!0)})),e.exports=l},648:(e,t,r)=>{"use strict";var n=r(867);function o(e,t,r,n,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}n.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,s={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){s[e]={value:e}})),Object.defineProperties(o,s),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(e,t,r,s,a,c){var u=Object.create(i);return n.toFlatObject(e,u,(function(e){return e!==Error.prototype})),o.call(u,e.message,t,r,s,a),u.name=e.name,c&&Object.assign(u,c),u},e.exports=o},782:(e,t,r)=>{"use strict";var n=r(867);function o(){this.handlers=[]}o.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},97:(e,t,r)=>{"use strict";var n=r(793),o=r(303);e.exports=function(e,t){return e&&!n(t)?o(e,t):t}},572:(e,t,r)=>{"use strict";var n=r(867),o=r(527),i=r(502),s=r(546),a=r(644);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},185:(e,t,r)=>{"use strict";var n=r(867);e.exports=function(e,t){t=t||{};var r={};function o(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function i(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(e[r],t[r])}function s(e){if(!n.isUndefined(t[e]))return o(void 0,t[e])}function a(r){return n.isUndefined(t[r])?n.isUndefined(e[r])?void 0:o(void 0,e[r]):o(void 0,t[r])}function c(r){return r in t?o(e[r],t[r]):r in e?o(void 0,e[r]):void 0}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,o=t(e);n.isUndefined(o)&&t!==c||(r[e]=o)})),r}},26:(e,t,r)=>{"use strict";var n=r(648);e.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(new n("Request failed with status code "+r.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}},527:(e,t,r)=>{"use strict";var n=r(867),o=r(546);e.exports=function(e,t,r){var i=this||o;return n.forEach(r,(function(r){e=r.call(i,e,t)})),e}},546:(e,t,r)=>{"use strict";var n=r(867),o=r(16),i=r(648),s=r(874),a=r(675),c={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var h,l={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(h=r(448)),h),transformRequest:[function(e,t){if(o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e))return e;if(n.isArrayBufferView(e))return e.buffer;if(n.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r,i=n.isObject(e),s=t&&t["Content-Type"];if((r=n.isFileList(e))||i&&"multipart/form-data"===s){var c=this.env&&this.env.FormData;return a(r?{"files[]":e}:e,c&&new c)}return i||"application/json"===s?(u(t,"application/json"),function(e,t,r){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,r=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,s=!r&&"json"===this.responseType;if(s||o&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:r(623)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){l.headers[e]=n.merge(c)})),e.exports=l},874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},288:e=>{e.exports={version:"0.27.2"}},849:e=>{"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},327:(e,t,r)=>{"use strict";var n=r(867);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(n.isURLSearchParams(t))i=t.toString();else{var s=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},372:(e,t,r)=>{"use strict";var n=r(867);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},268:(e,t,r)=>{"use strict";var n=r(867);e.exports=function(e){return n.isObject(e)&&!0===e.isAxiosError}},985:(e,t,r)=>{"use strict";var n=r(867);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},16:(e,t,r)=>{"use strict";var n=r(867);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},623:e=>{e.exports=null},109:(e,t,r)=>{"use strict";var n=r(867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,i,s={};return e?(n.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([r]):s[t]?s[t]+", "+r:r}})),s):s}},205:e=>{"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},675:(e,t,r)=>{"use strict";var n=r(867);e.exports=function(e,t){t=t||new FormData;var r=[];function o(e){return null===e?"":n.isDate(e)?e.toISOString():n.isArrayBuffer(e)||n.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(i,s){if(n.isPlainObject(i)||n.isArray(i)){if(-1!==r.indexOf(i))throw Error("Circular reference detected in "+s);r.push(i),n.forEach(i,(function(r,i){if(!n.isUndefined(r)){var a,c=s?s+"."+i:i;if(r&&!s&&"object"==typeof r)if(n.endsWith(i,"{}"))r=JSON.stringify(r);else if(n.endsWith(i,"[]")&&(a=n.toArray(r)))return void a.forEach((function(e){!n.isUndefined(e)&&t.append(c,o(e))}));e(r,c)}})),r.pop()}else t.append(s,o(i))}(e),t}},875:(e,t,r)=>{"use strict";var n=r(288).version,o=r(648),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));var s={};i.transitional=function(e,t,r){function i(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,n,a){if(!1===e)throw new o(i(n," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!s[n]&&(s[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,a)}},e.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),i=n.length;i-- >0;){var s=n[i],a=t[s];if(a){var c=e[s],u=void 0===c||a(c,s,e);if(!0!==u)throw new o("option "+s+" must be "+u,o.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new o("Unknown option "+s,o.ERR_BAD_OPTION)}},validators:i}},867:(e,t,r)=>{"use strict";var n,o=r(849),i=Object.prototype.toString,s=(n=Object.create(null),function(e){var t=i.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())});function a(e){return e=e.toLowerCase(),function(t){return s(t)===e}}function c(e){return Array.isArray(e)}function u(e){return void 0===e}var h=a("ArrayBuffer");function l(e){return null!==e&&"object"==typeof e}function f(e){if("object"!==s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var p=a("Date"),d=a("File"),m=a("Blob"),_=a("FileList");function g(e){return"[object Function]"===i.call(e)}var v=a("URLSearchParams");function b(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),c(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var E,y=(E="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return E&&e instanceof E});e.exports={isArray:c,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"==typeof FormData&&e instanceof FormData||i.call(e)===t||g(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:f,isUndefined:u,isDate:p,isFile:d,isBlob:m,isFunction:g,isStream:function(e){return l(e)&&g(e.pipe)},isURLSearchParams:v,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:b,merge:function e(){var t={};function r(r,n){f(t[n])&&f(r)?t[n]=e(t[n],r):f(r)?t[n]=e({},r):c(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)b(arguments[n],r);return t},extend:function(e,t,r){return b(t,(function(t,n){e[n]=r&&"function"==typeof t?o(t,r):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r){var n,o,i,s={};t=t||{};do{for(o=(n=Object.getOwnPropertyNames(e)).length;o-- >0;)s[i=n[o]]||(t[i]=e[i],s[i]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:a,endsWith:function(e,t,r){e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},isTypedArray:y,isFileList:_}},529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chess=t.validateFen=t.SQUARES=t.DEFAULT_POSITION=t.KING=t.QUEEN=t.ROOK=t.BISHOP=t.KNIGHT=t.PAWN=t.BLACK=t.WHITE=void 0,t.WHITE="w",t.BLACK="b",t.PAWN="p",t.KNIGHT="n",t.BISHOP="b",t.ROOK="r",t.QUEEN="q",t.KING="k",t.DEFAULT_POSITION="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";const r=-1,n={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"};t.SQUARES=["a8","b8","c8","d8","e8","f8","g8","h8","a7","b7","c7","d7","e7","f7","g7","h7","a6","b6","c6","d6","e6","f6","g6","h6","a5","b5","c5","d5","e5","f5","g5","h5","a4","b4","c4","d4","e4","f4","g4","h4","a3","b3","c3","d3","e3","f3","g3","h3","a2","b2","c2","d2","e2","f2","g2","h2","a1","b1","c1","d1","e1","f1","g1","h1"];const o={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},i={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},s={b:[16,32,17,15],w:[-16,-32,-17,-15]},a={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},c=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],u=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],h={p:1,n:2,b:4,r:8,q:16,k:32},l=[t.KNIGHT,t.BISHOP,t.ROOK,t.QUEEN],f={w:[{square:i.a1,flag:o.QSIDE_CASTLE},{square:i.h1,flag:o.KSIDE_CASTLE}],b:[{square:i.a8,flag:o.QSIDE_CASTLE},{square:i.h8,flag:o.KSIDE_CASTLE}]},p={b:1,w:6},d=["1-0","0-1","1/2-1/2","*"];function m(e){return e>>4}function _(e){return 15&e}function g(e){return-1!=="0123456789".indexOf(e)}function v(e){const t=_(e),r=m(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function b(e){return e===t.WHITE?t.BLACK:t.WHITE}function E(e){const t=[];t[0]="No errors.",t[1]="FEN string must contain six space-delimited fields.",t[2]="6th field (move number) must be a positive integer.",t[3]="5th field (half move counter) must be a non-negative integer.",t[4]="4th field (en-passant square) is invalid.",t[5]="3rd field (castling availability) is invalid.",t[6]="2nd field (side to move) is invalid.",t[7]="1st field (piece positions) does not contain 8 '/'-delimited rows.",t[8]="1st field (piece positions) is invalid [consecutive numbers].",t[9]="1st field (piece positions) is invalid [invalid piece].",t[10]="1st field (piece positions) is invalid [row too large].",t[11]="Illegal en-passant square";const r=e.split(/\s+/);if(6!==r.length)return{valid:!1,errorNumber:1,error:t[1]};const n=parseInt(r[5],10);if(isNaN(n)||n<=0)return{valid:!1,errorNumber:2,error:t[2]};const o=parseInt(r[4],10);if(isNaN(o)||o<0)return{valid:!1,errorNumber:3,error:t[3]};if(!/^(-|[abcdefgh][36])$/.test(r[3]))return{valid:!1,errorNumber:4,error:t[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(r[2]))return{valid:!1,errorNumber:5,error:t[5]};if(!/^(w|b)$/.test(r[1]))return{valid:!1,errorNumber:6,error:t[6]};const i=r[0].split("/");if(8!==i.length)return{valid:!1,errorNumber:7,error:t[7]};for(let e=0;e<i.length;e++){let r=0,n=!1;for(let o=0;o<i[e].length;o++)if(g(i[e][o])){if(n)return{valid:!1,errorNumber:8,error:t[8]};r+=parseInt(i[e][o],10),n=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[e][o]))return{valid:!1,errorNumber:9,error:t[9]};r+=1,n=!1}if(8!==r)return{valid:!1,errorNumber:10,error:t[10]}}return"3"==r[3][1]&&"w"==r[1]||"6"==r[3][1]&&"b"==r[1]?{valid:!1,errorNumber:11,error:t[11]}:{valid:!0,errorNumber:0,error:t[0]}}function y(e,r,n,i,s,a,c=o.NORMAL){const u=m(i);if(s!==t.PAWN||7!==u&&0!==u)e.push({color:r,from:n,to:i,piece:s,captured:a,promotion:void 0,flags:c});else for(let t=0;t<l.length;t++){const u=l[t];e.push({color:r,from:n,to:i,piece:s,captured:a,promotion:u,flags:c|o.PROMOTION})}}function S(e){let r=e.charAt(0);if(r>="a"&&r<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return t.PAWN}return r=r.toLowerCase(),"o"===r?t.KING:r}function A(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}t.validateFen=E,t.Chess=class{constructor(e=t.DEFAULT_POSITION){this._board=new Array(128),this._turn=t.WHITE,this._header={},this._kings={w:r,b:r},this._epSquare=-1,this._halfMoves=0,this._moveNumber=0,this._history=[],this._comments={},this._castling={w:0,b:0},this.load(e)}clear(e=!1){this._board=new Array(128),this._kings={w:r,b:r},this._turn=t.WHITE,this._castling={w:0,b:0},this._epSquare=r,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{},this._updateSetup(this.fen())}load(e,n=!1){const s=e.split(/\s+/),a=s[0];let c=0;if(!E(e).valid)return!1;this.clear(n);for(let e=0;e<a.length;e++){const r=a.charAt(e);if("/"===r)c+=8;else if(g(r))c+=parseInt(r,10);else{const e=r<"a"?t.WHITE:t.BLACK;this.put({type:r.toLowerCase(),color:e},v(c)),c++}}return this._turn=s[1],s[2].indexOf("K")>-1&&(this._castling.w|=o.KSIDE_CASTLE),s[2].indexOf("Q")>-1&&(this._castling.w|=o.QSIDE_CASTLE),s[2].indexOf("k")>-1&&(this._castling.b|=o.KSIDE_CASTLE),s[2].indexOf("q")>-1&&(this._castling.b|=o.QSIDE_CASTLE),this._epSquare="-"===s[3]?r:i[s[3]],this._halfMoves=parseInt(s[4],10),this._moveNumber=parseInt(s[5],10),this._updateSetup(this.fen()),!0}fen(){let e=0,n="";for(let r=i.a8;r<=i.h1;r++){if(this._board[r]){e>0&&(n+=e,e=0);const{color:o,type:i}=this._board[r];n+=o===t.WHITE?i.toUpperCase():i.toLowerCase()}else e++;r+1&136&&(e>0&&(n+=e),r!==i.h1&&(n+="/"),e=0,r+=8)}let s="";this._castling[t.WHITE]&o.KSIDE_CASTLE&&(s+="K"),this._castling[t.WHITE]&o.QSIDE_CASTLE&&(s+="Q"),this._castling[t.BLACK]&o.KSIDE_CASTLE&&(s+="k"),this._castling[t.BLACK]&o.QSIDE_CASTLE&&(s+="q"),s=s||"-";const a=this._epSquare===r?"-":v(this._epSquare);return[n,this._turn,s,a,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==t.DEFAULT_POSITION?(this._header.SetUp="1",this._header.FEN=e):(delete this._header.SetUp,delete this._header.FEN))}reset(){this.load(t.DEFAULT_POSITION)}get(e){return this._board[i[e]]||!1}put({type:e,color:n},o){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase()))return!1;if(!(o in i))return!1;const s=i[o];return(e!=t.KING||this._kings[n]==r||this._kings[n]==s)&&(this._board[s]={type:e,color:n},e===t.KING&&(this._kings[n]=s),this._updateSetup(this.fen()),!0)}remove(e){const n=this.get(e);return delete this._board[i[e]],n&&n.type===t.KING&&(this._kings[n.color]=r),this._updateSetup(this.fen()),n}_attacked(e,r){for(let n=i.a8;n<=i.h1;n++){if(136&n){n+=7;continue}if(void 0===this._board[n]||this._board[n].color!==e)continue;const o=this._board[n],i=n-r,s=i+119;if(c[s]&h[o.type]){if(o.type===t.PAWN){if(i>0){if(o.color===t.WHITE)return!0}else if(o.color===t.BLACK)return!0;continue}if("n"===o.type||"k"===o.type)return!0;const e=u[s];let a=n+e,c=!1;for(;a!==r;){if(null!=this._board[a]){c=!0;break}a+=e}if(!c)return!0}}return!1}_isKingAttacked(e){return this._attacked(b(e),this._kings[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},r=[];let n=0,o=0;for(let s=i.a8;s<=i.h1;s++){if(o=(o+1)%2,136&s){s+=7;continue}const i=this._board[s];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===t.BISHOP&&r.push(o),n++)}if(2===n)return!0;if(3===n&&(1===e[t.BISHOP]||1===e[t.KNIGHT]))return!0;if(n===e[t.BISHOP]+2){let e=0;const t=r.length;for(let n=0;n<t;n++)e+=r[n];if(0===e||e===t)return!0}return!1}isThreefoldRepetition(){const e=[],t={};let r=!1;for(;;){const t=this._undoMove();if(!t)break;e.push(t)}for(;;){const n=this.fen().split(" ").slice(0,4).join(" ");t[n]=n in t?t[n]+1:1,t[n]>=3&&(r=!0);const o=e.pop();if(!o)break;this._makeMove(o)}return r}isDraw(){return this._halfMoves>=100||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t}={}){const r=this._moves({square:t});return e?r.map((e=>this._makePretty(e))):r.map((e=>this._moveToSan(e,r)))}_moves({legal:e=!0,piece:r,square:n}={}){var c;const u=n?n.toLowerCase():void 0,h=null==r?void 0:r.toLowerCase(),l=[],f=this._turn,d=b(f);let _=i.a8,g=i.h1,v=!1;if(u){if(!(u in i))return[];_=g=i[u],v=!0}for(let e=_;e<=g;e++){if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===d)continue;const{type:r}=this._board[e];let n;if(r===t.PAWN){if(h&&h!==r)continue;n=e+s[f][0],this._board[n]||(y(l,f,e,n,t.PAWN),n=e+s[f][1],p[f]!==m(e)||this._board[n]||y(l,f,e,n,t.PAWN,void 0,o.BIG_PAWN));for(let r=2;r<4;r++)n=e+s[f][r],136&n||((null===(c=this._board[n])||void 0===c?void 0:c.color)===d?y(l,f,e,n,t.PAWN,this._board[n].type,o.CAPTURE):n===this._epSquare&&y(l,f,e,n,t.PAWN,t.PAWN,o.EP_CAPTURE))}else{if(h&&h!==r)continue;for(let i=0,s=a[r].length;i<s;i++){const s=a[r][i];for(n=e;n+=s,!(136&n);){if(this._board[n]){if(this._board[n].color===f)break;y(l,f,e,n,r,this._board[n].type,o.CAPTURE);break}if(y(l,f,e,n,r),r===t.KNIGHT||r===t.KING)break}}}}if(!(void 0!==h&&h!==t.KING||v&&g!==this._kings[f])){if(this._castling[f]&o.KSIDE_CASTLE){const e=this._kings[f],r=e+2;this._board[e+1]||this._board[r]||this._attacked(d,this._kings[f])||this._attacked(d,e+1)||this._attacked(d,r)||y(l,f,this._kings[f],r,t.KING,void 0,o.KSIDE_CASTLE)}if(this._castling[f]&o.QSIDE_CASTLE){const e=this._kings[f],r=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(d,this._kings[f])||this._attacked(d,e-1)||this._attacked(d,r)||y(l,f,this._kings[f],r,t.KING,void 0,o.QSIDE_CASTLE)}}if(!e)return l;const E=[];for(let e=0,t=l.length;e<t;e++)this._makeMove(l[e]),this._isKingAttacked(f)||E.push(l[e]),this._undoMove();return E}move(e,{sloppy:t=!1}={}){let r=null;if("string"==typeof e)r=this._moveFromSan(e,t);else if("object"==typeof e){const t=this._moves();for(let n=0,o=t.length;n<o;n++)if(e.from===v(t[n].from)&&e.to===v(t[n].to)&&(!("promotion"in t[n])||e.promotion===t[n].promotion)){r=t[n];break}}if(!r)return null;const n=this._makePretty(r);return this._makeMove(r),n}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){const n=this._turn,i=b(n);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&o.EP_CAPTURE&&(this._turn===t.BLACK?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:n}),this._board[e.to].type===t.KING){if(this._kings[n]=e.to,e.flags&o.KSIDE_CASTLE){const t=e.to-1,r=e.to+1;this._board[t]=this._board[r],delete this._board[r]}else if(e.flags&o.QSIDE_CASTLE){const t=e.to+1,r=e.to-2;this._board[t]=this._board[r],delete this._board[r]}this._castling[n]=0}if(this._castling[n])for(let t=0,r=f[n].length;t<r;t++)if(e.from===f[n][t].square&&this._castling[n]&f[n][t].flag){this._castling[n]^=f[n][t].flag;break}if(this._castling[i])for(let t=0,r=f[i].length;t<r;t++)if(e.to===f[i][t].square&&this._castling[i]&f[i][t].flag){this._castling[i]^=f[i][t].flag;break}e.flags&o.BIG_PAWN?n===t.BLACK?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=r,e.piece===t.PAWN||e.flags&(o.CAPTURE|o.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===t.BLACK&&this._moveNumber++,this._turn=i}undo(){const e=this._undoMove();return e?this._makePretty(e):null}_undoMove(){const e=this._history.pop();if(void 0===e)return null;const r=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;const n=this._turn,i=b(n);if(this._board[r.from]=this._board[r.to],this._board[r.from].type=r.piece,delete this._board[r.to],r.captured)if(r.flags&o.EP_CAPTURE){let e;e=n===t.BLACK?r.to-16:r.to+16,this._board[e]={type:t.PAWN,color:i}}else this._board[r.to]={type:r.captured,color:i};if(r.flags&(o.KSIDE_CASTLE|o.QSIDE_CASTLE)){let e,t;r.flags&o.KSIDE_CASTLE?(e=r.to+1,t=r.to-1):(e=r.to-2,t=r.to+1),this._board[e]=this._board[t],delete this._board[t]}return r}pgn({newline:e="\n",maxWidth:t=0}={}){const r=[];let n=!1;for(const t in this._header)r.push("["+t+' "'+this._header[t]+'"]'+e),n=!0;n&&this._history.length&&r.push(e);const o=e=>{const t=this._comments[this.fen()];return void 0!==t&&(e=`${e}${e.length>0?" ":""}{${t}}`),e},i=[];for(;this._history.length>0;)i.push(this._undoMove());const s=[];let a="";for(0===i.length&&s.push(o(""));i.length>0;){a=o(a);const e=i.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(a.length&&s.push(a),a=this._moveNumber+".");else{const e=`${this._moveNumber}. ...`;a=a?`${a} ${e}`:e}a=a+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(a.length&&s.push(o(a)),void 0!==this._header.Result&&s.push(this._header.Result),0===t)return r.join("")+s.join(" ");const c=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},u=function(n,o){for(const i of o.split(" "))if(i){if(n+i.length>t){for(;c();)n--;r.push(e),n=0}r.push(i),n+=i.length,r.push(" "),n++}return c()&&n--,n};let h=0;for(let n=0;n<s.length;n++)h+s[n].length>t&&s[n].includes("{")?h=u(h,s[n]):(h+s[n].length>t&&0!==n?(" "===r[r.length-1]&&r.pop(),r.push(e),h=0):0!==n&&(r.push(" "),h++),r.push(s[n]),h+=s[n].length);return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}loadPgn(e,{sloppy:t=!1,newlineChar:r="\r?\n"}={}){function n(e){return e.replace(/\\/g,"\\")}e=e.trim();const o=new RegExp("^(\\[((?:"+n(r)+")|.)*\\])(?:\\s*"+n(r)+"){2}").exec(e),i=o&&o.length>=2?o[1]:"";this.reset();const s=function(e){const t={},o=e.split(new RegExp(n(r)));let i="",s="";for(let e=0;e<o.length;e++){const r=/^\s*\[([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;i=o[e].replace(r,"$1"),s=o[e].replace(r,"$2"),i.trim().length>0&&(t[i]=s)}return t}(i);let a="";for(const e in s)"fen"===e.toLowerCase()&&(a=s[e]),this.header(e,s[e]);if(t){if(a&&!this.load(a,!0))return!1}else if(!("1"!==s.SetUp||"FEN"in s&&this.load(s.FEN,!0)))return!1;const c=function(e){return`{${function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()})).join("")}((e=e.replace(new RegExp(n(r),"g")," ")).slice(1,e.length-1))}}`},u=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+(e.match(/.{1,2}/g)||[]).join("%"))}(e.slice(1,e.length-1))};let h=e.replace(i,"").replace(new RegExp(`({[^}]*})+?|;([^${n(r)}]*)`,"g"),(function(e,t,r){return void 0!==t?c(t):" "+c(`{${r.slice(1)}}`)})).replace(new RegExp(n(r),"g")," ");const l=/(\([^()]+\))+?/g;for(;l.test(h);)h=h.replace(l,"");h=h.replace(/\d+\.(\.\.)?/g,""),h=h.replace(/\.\.\./g,""),h=h.replace(/\$\d+/g,"");let f=h.trim().split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");let p="";for(let e=0;e<f.length;e++){const r=u(f[e]);if(void 0!==r){this._comments[this.fen()]=r;continue}const n=this._moveFromSan(f[e],t);if(null==n){if(!(d.indexOf(f[e])>-1))return!1;p=f[e]}else p="",this._makeMove(n)}return p&&Object.keys(this._header).length&&!this._header.Result&&this.header("Result",p),!0}_moveToSan(e,r){let n="";if(e.flags&o.KSIDE_CASTLE)n="O-O";else if(e.flags&o.QSIDE_CASTLE)n="O-O-O";else{if(e.piece!==t.PAWN){const t=function(e,t){const r=e.from,n=e.to,o=e.piece;let i=0,s=0,a=0;for(let e=0,c=t.length;e<c;e++){const c=t[e].from,u=t[e].to;o===t[e].piece&&r!==c&&n===u&&(i++,m(r)===m(c)&&s++,_(r)===_(c)&&a++)}return i>0?s>0&&a>0?v(r):a>0?v(r).charAt(1):v(r).charAt(0):""}(e,r);n+=e.piece.toUpperCase()+t}e.flags&(o.CAPTURE|o.EP_CAPTURE)&&(e.piece===t.PAWN&&(n+=v(e.from)[0]),n+="x"),n+=v(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,t=!1){const r=A(e);let n,o,s,a,c,u=S(r),h=this._moves({legal:!0,piece:u});for(let e=0,t=h.length;e<t;e++)if(r===A(this._moveToSan(h[e],h)))return h[e];if(!t)return null;let l=!1;o=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),o?(n=o[1],s=o[2],a=o[3],c=o[4],1==s.length&&(l=!0)):(o=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),o&&(n=o[1],s=o[2],a=o[3],c=o[4],1==s.length&&(l=!0))),u=S(r),h=this._moves({legal:!0,piece:n||u});for(let e=0,t=h.length;e<t;e++)if(s&&a){if(!(n&&n.toLowerCase()!=h[e].piece||i[s]!=h[e].from||i[a]!=h[e].to||c&&c.toLowerCase()!=h[e].promotion))return h[e];if(l){const t=v(h[e].from);if(!(n&&n.toLowerCase()!=h[e].piece||i[a]!=h[e].to||s!=t[0]&&s!=t[1]||c&&c.toLowerCase()!=h[e].promotion))return h[e]}}return null}ascii(){let e="   +------------------------+\n";for(let r=i.a8;r<=i.h1;r++){if(0===_(r)&&(e+=" "+"87654321"[m(r)]+" |"),this._board[r]){const n=this._board[r].type;e+=" "+(this._board[r].color===t.WHITE?n.toUpperCase():n.toLowerCase())+" "}else e+=" . ";r+1&136&&(e+="|\n",r+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let r=0;const n=this._turn;for(let o=0,i=t.length;o<i;o++)this._makeMove(t[o]),this._isKingAttacked(n)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}_makePretty(e){const{color:t,piece:r,from:i,to:s,flags:a,captured:c,promotion:u}=e;let h="";for(const e in o)o[e]&a&&(h+=n[e]);const l={color:t,piece:r,from:v(i),to:v(s),san:this._moveToSan(e,this._moves({legal:!0})),flags:h};return c&&(l.captured=c),u&&(l.promotion=u),l}turn(){return this._turn}board(){const e=[];let t=[];for(let r=i.a8;r<=i.h1;r++)null==this._board[r]?t.push(null):t.push({square:v(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in i){const t=i[e];return(m(t)+_(t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const n=t.pop();if(!n)break;e?r.push(this._makePretty(n)):r.push(this._moveToSan(n,this._moves())),this._makeMove(n)}return r}_pruneComments(){const e=[],t={},r=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const t=e.pop();if(!t)break;this._makeMove(t),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>({fen:e,comment:this._comments[e]})))}deleteComments(){return this._pruneComments(),Object.keys(this._comments).map((e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}}))}}},344:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(207),s=r(286),a=o(r(246));document.querySelectorAll(".chessExportChoice").forEach((e=>{e.addEventListener("click",(()=>function(e){return n(this,void 0,void 0,(function*(){try{const t=yield browser.tabs.query({currentWindow:!0,active:!0});if(t.length<1||void 0===t[0].id)throw new Error("No active tab available");const{myMove:r,engineMove:n,fen:o,priorFen:c,chessComLink:u,priorEnemyMove:h}=yield browser.tabs.sendMessage(t[0].id,"extract_move"),[l,f]=(0,i.generateFens)(r,n,h,c,e),p=(0,a.default)(l,f,u,o,r,h,n,e);yield(0,s.createAnkiCard)(p)}catch(e){console.error(`Error: ${String(e)}`)}}))}(e.id)))}))},246:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,o,i,s,a){return{problemFen:e,solutionFen:t,chessComLink:r,lichessLink:`https://lichess.org/analysis/${n}`,problemText:"bestmove"===a?`Opponent played ${i}. What's the best move here?`:`Opponent played ${i} and I played ${o}. What's a better move?`,solutionText:"bestmove"===a?`${s}. In the game I played ${o} which ain't so good`:s,blackTurn:"b"===n.split(" ")[1]}}},286:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{c(n.next(e))}catch(e){i(e)}}function a(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAnkiCard=void 0;const i=o(r(669));function s(e){return n(this,void 0,void 0,(function*(){console.log("wow");try{const t=(yield i.default.post("http://127.0.0.1:8765",{action:"guiAddCards",version:6,params:{note:{deckName:"My German",modelName:"Chess Question",fields:{front_position:e.problemFen,question:e.problemText,solution_position:e.solutionFen,solution:e.solutionText,"black_to_play?":e.blackTurn?"y":"",lichess_link:e.lichessLink,chess_com_link:e.chessComLink},tags:["chess","chess-generated"]}}})).data;if(t.error)throw new Error(t.error);console.log(t)}catch(e){console.error(e)}}))}t.createAnkiCard=s,t.default=s},207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateFens=void 0;const n=r(529);function o(e,t,r,o,a){const c=new n.Chess;c.load(o),c.move(r);const u=c.fen();c.move(e);const h=c.fen();c.undo(),c.move(t);const l=c.fen();return"bestmove"===a?[i(o,u,!0).join(""),i(u,l).join("")]:[s(i(o,u,!0),i(u,h)).join(""),i(u,l).join("")]}function i(e,t,r=!1){const n=a(e),o=a(t);if(n.length!==o.length)throw new Error(`Fen ${n} and ${o} are different lengths.`);const i=r?"[":"(",s=r?"]":")";return o.split("").map(((e,t)=>e===n[t]?e:`${i}${e}${s}`))}function s(e,t){return t.map(((t,r)=>"["===e[r][0]&&"("!==t[0]?`[${t}]`:t))}function a(e){const[t]=e.split(" ");let r=t.split("");return r=r.map((e=>/^\d+$/.test(e)?".".repeat(Number(e)):e)),r.join("")}t.generateFens=o,t.default=o}},t={};!function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}(344)})();